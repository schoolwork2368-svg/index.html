<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A; /* Slate 900 */
            color: #E2E8F0; /* Slate 200 */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        /* Custom cell styling */
        .cell {
            background-color: #1E293B; /* Slate 800 */
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4rem;
            font-weight: 900;
            cursor: pointer;
            transition: background-color 0.15s, transform 0.1s;
            user-select: none;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }

        .cell:hover:not(.occupied) {
            background-color: #334155; /* Slate 700 on hover */
        }

        /* Player color styling */
        .playerX {
            color: #F87171; /* Red 400 */
            text-shadow: 0 0 10px rgba(248, 113, 113, 0.7);
        }

        .playerO {
            color: #60A5FA; /* Blue 400 */
            text-shadow: 0 0 10px rgba(96, 165, 250, 0.7);
        }

        /* Grid container for 3x3 layout */
        #gameBoard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            width: min(90vw, 400px); /* Max width on desktop, responsive on mobile */
            height: min(90vw, 400px);
            gap: 0.75rem;
            margin-bottom: 2rem;
            padding: 1rem;
            border-radius: 1rem;
            background-color: #1e293b;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }

        .restart-button {
            background-color: #FBBF24; /* Amber 400 */
            color: #111827;
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* Pill shape */
            transition: all 0.2s ease;
            box-shadow: 0 4px #D97706; /* Darker amber shadow */
            cursor: pointer;
        }
        .restart-button:hover {
            background-color: #F59E0B; /* Amber 500 */
            transform: translateY(-2px);
            box-shadow: 0 6px #D97706;
        }
        .restart-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px #D97706;
        }
    </style>
</head>
<body>
    <div class="flex flex-col items-center p-6 sm:p-10 rounded-xl bg-slate-800/50">
        <h1 class="text-5xl font-extrabold mb-8 text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-blue-400">
            Tic-Tac-Toe
        </h1>

        <div id="statusDisplay" class="text-xl font-semibold mb-6 h-8 text-center">
            <!-- Game status updates here -->
        </div>

        <div id="gameBoard">
            <!-- Cells generated by JavaScript -->
        </div>

        <button id="restartButton" class="restart-button">
            Restart Game
        </button>
    </div>

    <script>
        // Game state variables
        let board = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let isGameActive = true;

        // Constants for display messages
        const STATUS_DISPLAY = document.querySelector('#statusDisplay');
        const RESTART_BUTTON = document.querySelector('#restartButton');
        const GAME_BOARD = document.querySelector('#gameBoard');

        const WINNING_CONDITIONS = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
            [0, 4, 8], [2, 4, 6]             // Diagonals
        ];

        // --- Message Helpers ---
        const drawMessage = () => `It's a Draw! ðŸ¤`;
        const winnerMessage = () => `Player ${currentPlayer} has won! ðŸŽ‰`;
        const turnMessage = () => `It's Player ${currentPlayer}'s turn.`;

        // Function to update the status message
        const updateStatus = (message) => {
            STATUS_DISPLAY.innerHTML = message;
        };

        // --- Core Game Logic ---

        function handleResultValidation() {
            let roundWon = false;
            for (let i = 0; i < WINNING_CONDITIONS.length; i++) {
                const winCondition = WINNING_CONDITIONS[i];
                let a = board[winCondition[0]];
                let b = board[winCondition[1]];
                let c = board[winCondition[2]];

                if (a === '' || b === '' || c === '') {
                    continue; // Skip if any cell is empty
                }
                if (a === b && b === c) {
                    roundWon = true;
                    // Visually highlight the winning line
                    winCondition.forEach(index => {
                        document.querySelector(`[data-index="${index}"]`).style.backgroundColor = '#10B981'; // Emerald 500
                    });
                    break;
                }
            }

            if (roundWon) {
                updateStatus(winnerMessage());
                isGameActive = false;
                return;
            }

            // Check for Draw (no winner and no empty cells)
            if (!board.includes('')) {
                updateStatus(drawMessage());
                isGameActive = false;
                return;
            }

            // If no winner or draw, change player
            handlePlayerChange();
        }

        function handleCellClick(e) {
            const clickedCell = e.target;

            // Only proceed if the clicked element is a game cell and the game is active
            if (!clickedCell.classList.contains('cell') || !isGameActive) {
                return;
            }

            const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));

            // Check if the cell is already played
            if (board[clickedCellIndex] !== '') {
                return;
            }

            // 1. Update the board array
            board[clickedCellIndex] = currentPlayer;

            // 2. Update the UI
            clickedCell.textContent = currentPlayer;
            clickedCell.classList.add(`player${currentPlayer}`, 'occupied');

            // 3. Check for the game result
            handleResultValidation();
        }

        function handlePlayerChange() {
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            updateStatus(turnMessage());
        }

        function restartGame() {
            isGameActive = true;
            currentPlayer = 'X';
            board = ['', '', '', '', '', '', '', '', ''];
            updateStatus(turnMessage());

            // Reset all cell visuals and content
            document.querySelectorAll('.cell').forEach(cell => {
                cell.textContent = '';
                cell.className = 'cell'; // Reset all classes except the base 'cell'
                cell.style.backgroundColor = '';
            });
        }

        function createBoard() {
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.setAttribute('data-index', i);
                GAME_BOARD.appendChild(cell);
            }
        }

        // --- Event Listeners and Initialization ---

        window.onload = () => {
            createBoard();
            // Start the game by showing the first player's turn
            updateStatus(turnMessage());
        }

        // Add event listener to the board container (event delegation)
        GAME_BOARD.addEventListener('click', handleCellClick);
        RESTART_BUTTON.addEventListener('click', restartGame);

    </script>
</body>
</html>